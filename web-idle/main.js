var money=40,max_m=60,hq=0,sk_r=1,sk_ref=-.1,price=30,price_g=30,price_d=270,price_e=670,price_s=970,price_b=1270,value_g=1,value_d=2.3,value_e=7.3,value_s=15.3,value_b=16.4,price_hq_d=17e3,price_hq_e=7e4,price_hq_s=27e4,price_hq_b=37e4,station_c=0,station_g=0,station_d=0,station_e=0,station_s=0,station_b=0,q="hidden",r="visible",z="position: absolute; left: 3000px;",re="position: relative; left: 0px;",cars=[],carsCount=100,trucks=[],trucksCount=100,electrics=[],electricsCount=100,scooters=[],scootersCount=100,bikes=[],bikesCount=100,fscreen=0;function fullScreen(){0==fscreen?(body.requestFullscreen(),fscreen=1):1==fscreen&&(document.exitFullscreen(),fscreen=0)}init();var body,start=0;function init(){1==sk_r&&(money=10,document.getElementById("money").innerHTML=Math.floor(money)+"$",price_g=4.8,price_d=100*value_g*10*(.6+sk_ref)+value_d*station_d*10*(.5+sk_ref),price_e=100*value_d*10*(.5+sk_ref)+value_e*station_e*10*(.4+sk_ref),price_s=100*value_e*10*(.4+sk_ref)+value_s*station_s*10*(.3+sk_ref),price_b=100*value_s*10*(.3+sk_ref)+value_b*station_b*10*(.2+sk_ref),price_hq_d=carsCount*value_g*30,price_hq_e=trucksCount*value_d*30,price_hq_s=electricsCount*value_e*30,price_hq_b=scootersCount*value_s*30),body=document.getElementById("body"),document.getElementById("price_g").innerHTML=Math.floor(price_g)+"$",document.getElementById("price_d").innerHTML=Math.floor(price_d)+"$",document.getElementById("price_e").innerHTML=Math.floor(price_e)+"$",document.getElementById("price_s").innerHTML=Math.floor(price_s)+"$",document.getElementById("price_b").innerHTML=Math.floor(price_b)+"$",document.getElementById("price_dhq").innerHTML=Math.floor(price_hq_d)+"$",document.getElementById("price_ehq").innerHTML=Math.floor(price_hq_e)+"$",document.getElementById("price_shq").innerHTML=Math.floor(price_hq_s)+"$",document.getElementById("price_bhq").innerHTML=Math.floor(price_hq_b)+"$",document.getElementById("game").style.visibility=r,document.getElementById("diesel").style=z,document.getElementById("electric").style=z,document.getElementById("scooter").style=z,document.getElementById("bike").style=z,document.getElementById("btn_bus").style.visibility=q,document.getElementById("btn_electric").style.visibility=q,document.getElementById("btn_scooter").style.visibility=q,document.getElementById("btn_bike").style.visibility=q;var e,t,s,n,i,o=parseInt(getCookie("gas")),c=parseInt(getCookie("diesel")),a=parseInt(getCookie("electric")),l=parseInt(getCookie("scooter")),d=parseInt(getCookie("bike")),m=parseInt(getCookie("hq")),_=parseInt(getCookie("money"));if(isNaN(_)||(money=_),start=1,!isNaN(m)){hq=0;for(var u=1;u<m+1;u++)buyHQUpgrade(u)}if(!isNaN(o)){e=parseInt(getCookie("gas")),document.getElementById("count_g").innerHTML=e;for(u=1;u<e+1;u++)buyGasStation(1)}if(!isNaN(c)){t=parseInt(getCookie("diesel"));for(u=1;u<t+1;u++)buyGasStation(2);document.getElementById("count_d").innerHTML=t}if(!isNaN(a)){s=parseInt(getCookie("electric"));for(u=1;u<s+1;u++)buyGasStation(3);document.getElementById("count_e").innerHTML=s}if(!isNaN(l)){n=parseInt(getCookie("scooter"));for(u=1;u<n+1;u++)buyGasStation(4);document.getElementById("count_s").innerHTML=n}if(!isNaN(d)){i=parseInt(getCookie("bike"));for(u=1;u<i+1;u++)buyGasStation(5);document.getElementById("count_b").innerHTML=i}for(var y=start=0;y<carsCount;y++)cars.push({id:y,start:0,end:0,station:0,state:1,delay:4});for(y=0;y<trucksCount;y++)trucks.push({id:y,start:0,end:0,station:0,state:1,delay:4});for(y=0;y<electricsCount;y++)electrics.push({id:y,start:0,end:0,station:0,state:1,delay:4});for(y=0;y<scootersCount;y++)scooters.push({id:y,start:0,end:0,station:0,state:1,delay:7});for(y=0;y<bikesCount;y++)bikes.push({id:y,start:0,end:0,station:0,state:1,delay:7});setInterval(runGame,100)}function setCookie(e,t,s){const n=new Date;n.setTime(n.getTime()+24*s*60*60*1e3);s="expires="+n.toUTCString();document.cookie=e+"="+t+";"+s+";path=/"}function getCookie(e){for(var t=e+"=",s=document.cookie.split(";"),n=0;n<s.length;n++){for(var i=s[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}var m_p=0,sec=0,msec=0;function runGame(){sec+=.1,msec=Math.floor(sec);for(var e=0;e<station_g;e++)(t=e+1)<=station_g&&(cars[e].station=t,1==cars[e].state&&(cars[e].start=msec,cars[e].state=2,document.getElementById("pie"+t).style.background="conic-gradient(#04e500 0%, #FFF 0%)"),2==cars[e].state&&msec==cars[e].start+cars[e].delay&&(document.getElementById("pie"+t).style.visibility=r,document.getElementById("car"+t).style.visibility=r,cars[e].state=3,cars[e].start=msec),3==cars[e].state&&msec<=cars[e].start+10?(money+=value_g/10,s=100-10*(cars[e].start+10-sec),document.getElementById("pie"+t).style.background="conic-gradient(#04e500 "+s+"%, #FFF 0%)"):3==cars[e].state&&msec>cars[e].start+10&&(document.getElementById("car"+t).style.visibility=q,document.getElementById("pie"+t).style.visibility=q,cars[e].delay=Math.floor(7*Math.random())+6,cars[e].state=1));for(e=0;e<station_d;e++)(t=e+1)<=station_d&&(trucks[e].station=t,1==trucks[e].state&&(trucks[e].start=msec,trucks[e].state=2,document.getElementById("pie_d"+t).style.background="conic-gradient(#04e500 0%, #FFF 0%)"),2==trucks[e].state&&msec==trucks[e].start+trucks[e].delay&&(document.getElementById("pie_d"+t).style.visibility=r,document.getElementById("truck"+t).style.visibility=r,trucks[e].state=3,trucks[e].start=msec),3==trucks[e].state&&msec<=trucks[e].start+10?(money+=value_d/10,s=100-10*(trucks[e].start+10-sec),document.getElementById("pie_d"+t).style.background="conic-gradient(#04e500 "+s+"%, #FFF 0%)"):3==trucks[e].state&&msec>trucks[e].start+10&&(document.getElementById("truck"+t).style.visibility=q,document.getElementById("pie_d"+t).style.visibility=q,trucks[e].delay=Math.floor(12*Math.random()),trucks[e].state=1));for(e=0;e<station_e;e++)(t=e+1)<=station_e&&(electrics[e].station=t,1==electrics[e].state&&(electrics[e].start=msec,electrics[e].state=2,document.getElementById("pie_e"+t).style.background="conic-gradient(#04e500 0%, #FFF 0%)"),2==electrics[e].state&&msec==electrics[e].start+electrics[e].delay&&(document.getElementById("pie_e"+t).style.visibility=r,document.getElementById("electric"+t).style.visibility=r,electrics[e].state=3,electrics[e].start=msec),3==electrics[e].state&&msec<=electrics[e].start+10?(money+=value_e/10,s=100-10*(electrics[e].start+10-sec),document.getElementById("pie_e"+t).style.background="conic-gradient(#04e500 "+s+"%, #FFF 0%)"):3==electrics[e].state&&msec>electrics[e].start+10&&(document.getElementById("electric"+t).style.visibility=q,document.getElementById("pie_e"+t).style.visibility=q,electrics[e].delay=Math.floor(12*Math.random()),electrics[e].state=1));for(e=0;e<station_s;e++)(t=e+1)<=station_s&&(scooters[e].station=t,1==scooters[e].state&&(scooters[e].start=msec,scooters[e].state=2,document.getElementById("pie_s"+t).style.background="conic-gradient(#04e500 0%, #FFF 0%)"),2==scooters[e].state&&msec==scooters[e].start+scooters[e].delay&&(document.getElementById("pie_s"+t).style.visibility=r,document.getElementById("scooter"+t).style.visibility=r,scooters[e].state=3,scooters[e].start=msec),3==scooters[e].state&&msec<=scooters[e].start+10?(money+=value_s/10,s=100-10*(scooters[e].start+10-sec),document.getElementById("pie_s"+t).style.background="conic-gradient(#04e500 "+s+"%, #FFF 0%)"):3==scooters[e].state&&msec>scooters[e].start+10&&(document.getElementById("scooter"+t).style.visibility=q,document.getElementById("pie_s"+t).style.visibility=q,scooters[e].delay=Math.floor(12*Math.random()),scooters[e].state=1));for(var t,s,e=0;e<station_b;e++)(t=e+1)<=station_b&&(bikes[e].station=t,1==bikes[e].state&&(bikes[e].start=msec,bikes[e].state=2,document.getElementById("pie_b"+t).style.background="conic-gradient(#04e500 0%, #FFF 0%)"),2==bikes[e].state&&msec==bikes[e].start+bikes[e].delay&&(document.getElementById("pie_b"+t).style.visibility=r,document.getElementById("bike"+t).style.visibility=r,bikes[e].state=3,bikes[e].start=msec),3==bikes[e].state&&msec<=bikes[e].start+10?(money+=value_b/10,s=100-10*(bikes[e].start+10-sec),document.getElementById("pie_b"+t).style.background="conic-gradient(#04e500 "+s+"%, #FFF 0%)"):3==bikes[e].state&&msec>bikes[e].start+10&&(document.getElementById("bike"+t).style.visibility=q,document.getElementById("pie_b"+t).style.visibility=q,bikes[e].delay=Math.floor(12*Math.random()),bikes[e].state=1));m_p=value_g*station_g+value_d*station_d+value_e*station_e+value_s*station_s+value_b*station_b,document.getElementById("money-p").innerHTML=m_p+"$/sec",0<m_p&&m_p*max_m<=money?(money=12*m_p,document.getElementById("money").innerHTML=Math.floor(money)+"$ MAX"):document.getElementById("money").innerHTML=Math.floor(money)+"$",document.getElementById("btn_gas").classList.remove("buttong-a"),document.getElementById("btn_bus").classList.remove("buttong-a"),document.getElementById("btn_electric").classList.remove("buttong-a"),document.getElementById("btn_scooter").classList.remove("buttong-a"),document.getElementById("btn_bike").classList.remove("buttong-a"),document.getElementById("btn_hq_diesel").classList.remove("buttong-a"),document.getElementById("btn_hq_electric").classList.remove("buttong-a"),document.getElementById("btn_hq_scooter").classList.remove("buttong-a"),document.getElementById("btn_hq_bike").classList.remove("buttong-a"),price_g<=money&&document.getElementById("btn_gas").classList.add("buttong-a"),price_d<=money&&document.getElementById("btn_bus").classList.add("buttong-a"),price_e<=money&&document.getElementById("btn_electric").classList.add("buttong-a"),price_s<=money&&document.getElementById("btn_scooter").classList.add("buttong-a"),price_b<=money&&document.getElementById("btn_bike").classList.add("buttong-a"),price_hq_d<=money&&document.getElementById("btn_hq_diesel").classList.add("buttong-a"),price_hq_e<=money&&document.getElementById("btn_hq_electric").classList.add("buttong-a"),price_hq_s<=money&&document.getElementById("btn_hq_scooter").classList.add("buttong-a"),price_hq_b<=money&&document.getElementById("btn_hq_bike").classList.add("buttong-a")}function buyHQUpgrade(e){var t=0;1==e?t=price_hq_d:2==e?t=price_hq_e:3==e?t=price_hq_s:4==e&&(t=price_hq_b),e!=hq&&(t<=money||1==start)&&(0==start&&(money-=t,document.getElementById("money").innerHTML=Math.floor(money)+"$"),1==e?(document.getElementById("btn_bus").style.visibility=r,hq=1,document.getElementById("btn_hq_diesel").classList.add("buttong-g"),document.getElementById("diesel").style=re):2==e?(document.getElementById("btn_electric").style.visibility=r,hq=2,document.getElementById("btn_hq_electric").classList.add("buttong-g"),document.getElementById("electric").style=re):3==e?(document.getElementById("btn_scooter").style.visibility=r,hq=3,document.getElementById("btn_hq_scooter").classList.add("buttong-g"),document.getElementById("scooter").style=re):4==e&&(document.getElementById("btn_bike").style.visibility=r,hq=4,document.getElementById("btn_hq_bike").classList.add("buttong-g"),document.getElementById("bike").style=re),0==start&&(setCookie("money",money,365),setCookie("hq",hq,365)))}var station_re=0;function buyGasStation(e){console.log("buy gas station");var t,s,n,i,o=0;1==e?(price=price_g,station_c=station_g,o=carsCount):2==e?(price=price_d,station_c=station_d,o=trucksCount):3==e?(price=price_e,station_c=station_e,o=electricsCount):4==e?(price=price_s,station_c=station_s,o=scootersCount):5==e&&(price=price_b,station_c=station_b,o=bikesCount),(price<=money||1==start)&&station_c<o&&(0==start&&(money-=price,document.getElementById("money").innerHTML=Math.floor(money)+"$",station_c+=1),1==start&&(station_c+=1),(t=document.createElement("div")).setAttribute("id","g"+station_c),t.className="g g"+station_c,s=document.createElement("span"),(n=document.createElement("div")).className="pie",i=document.createElement("span"),1==e?(i.setAttribute("id","car"+station_c),i.className="material-symbols-outlined car",i.innerHTML="directions_car",s.innerHTML="local_gas_station",s.className="material-symbols-outlined station",n.setAttribute("id","pie"+station_c)):2==e?(i.setAttribute("id","truck"+station_c),i.className="material-symbols-outlined car",i.innerHTML="directions_bus",s.innerHTML="local_gas_station",s.className="material-symbols-outlined station-d",n.setAttribute("id","pie_d"+station_c)):3==e?(i.setAttribute("id","electric"+station_c),i.className="material-symbols-outlined car",i.innerHTML="electric_car",s.innerHTML="ev_station",s.className="material-symbols-outlined station-e",n.setAttribute("id","pie_e"+station_c)):4==e?(i.setAttribute("id","scooter"+station_c),i.className="material-symbols-outlined car",i.innerHTML="electric_scooter",s.innerHTML="ev_station",s.className="material-symbols-outlined station-s",n.setAttribute("id","pie_s"+station_c)):5==e&&(i.setAttribute("id","bike"+station_c),i.className="material-symbols-outlined car",i.innerHTML="electric_bike",s.innerHTML="ev_station",s.className="material-symbols-outlined station-b",n.setAttribute("id","pie_b"+station_c)),(o=document.createElement("div")).className="pie2",n.appendChild(o),t.appendChild(n),t.appendChild(s),t.appendChild(i),0==(m_p=value_g*station_g+value_d*station_d+value_e*station_e+value_s*station_s+value_b*station_b)&&(m_p=1),1==e?(document.getElementById("game").appendChild(t),station_g=station_c,setCookie("gas",document.getElementById("count_g").innerHTML=station_g,365),1==sk_r&&(price_g=value_g*station_g*10*(.6+sk_ref),document.getElementById("price_g").innerHTML=Math.floor(price_g)+"$")):2==e?(document.getElementById("diesel").appendChild(t),station_d=station_c,setCookie("diesel",document.getElementById("count_d").innerHTML=station_d,365),1==sk_r&&(price_d=100*value_g*10*(.6+sk_ref)+value_d*station_d*10*(.5+sk_ref),document.getElementById("price_d").innerHTML=Math.floor(price_d)+"$")):3==e?(station_e=station_c,document.getElementById("electric").appendChild(t),setCookie("electric",document.getElementById("count_e").innerHTML=station_e,365),1==sk_r&&(price_e=100*value_d*10*(.5+sk_ref)+value_e*station_e*10*(.4+sk_ref),document.getElementById("price_e").innerHTML=Math.floor(price_e)+"$")):4==e?(station_s=station_c,document.getElementById("scooter").appendChild(t),setCookie("scooter",document.getElementById("count_s").innerHTML=station_s,365),1==sk_r&&(price_s=100*value_e*10*(.4+sk_ref)+value_s*station_s*10*(.3+sk_ref),document.getElementById("price_s").innerHTML=Math.floor(price_s)+"$")):5==e&&(station_b=station_c,document.getElementById("bike").appendChild(t),setCookie("bike",document.getElementById("count_b").innerHTML=station_b,365),1==sk_r&&(price_b=100*value_s*10*(.3+sk_ref)+value_b*station_b*10*(.2+sk_ref),document.getElementById("price_b").innerHTML=Math.floor(price_b)+"$")),setCookie("money",money,365),i.style.visibility=q,n.style.visibility=q)}
